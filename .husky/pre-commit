#!/bin/sh
. "$(dirname "$0")/_/husky.sh"
echo "üîç Running pre-commit checks..."
STAGED_ENV_FILES=$(git diff --cached --name-only | grep -E '\.env$' || grep -E '\.pem$' || true)
if [ -n "$STAGED_ENV_FILES" ]; then
  echo "ERROR: .env files must not be committed:"
  echo "$STAGED_ENV_FILES"
  exit 1
fi
STAGED_LOG_FILES=$(git diff --cached --name-only | grep -E '\.log$' || true)
if [ -n "$STAGED_LOG_FILES" ]; then
  echo "‚ùå ERROR: .log files must not be committed:"
  echo "$STAGED_LOG_FILES"
  exit 1
fi
npx lint-staged
